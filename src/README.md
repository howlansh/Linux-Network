## Part 1. Инструмент ipcalc
* Адрес сети 192.167.38.54/13: 192.160.0.0.
* Перевод маски 255.255.255.0 в префиксную и двоичную запись: /24, 11111111.11111111.11111111.00000000.
* Перевод маски /15 в обычную и двоичную: 255.254.0.0, 11111111.11111110.00000000.00000000.
* ![](./screenshots/img_1.1.png)
* Перевод маски 11111111.11111111.11111111.11110000 в обычную и префиксную: 255,255,255,240, /28.
* Минимальный и максимальный хост в сети 12.167.38.4
* При маске /8: 12.0.0.1 - 12.255.255.254.
* При маске /16: 12.167.0.1 - 12.167.255.254.
* ![](./screenshots/img_1.2.png)
* При маске 255.255.254.0: 12.167.38.1 - 12.167.39.254.
* При маске /4: 0.0.0.1 - 15.255.255.254.
* ![](./screenshots/img_1.3.png)
* Можно ли обратиться к приложению, работающему на localhost, со следующими IP:
* 194.34.23.100 - нельзя.
* 127.0.0.2 - можно.
* 127.1.0.1 - можно.
* ![](./screenshots/img_1.4.png)
* 128.0.0.1 - нельзя.
* ![](./screenshots/img_1.5.png)
* Какие из перечисленных IP можно использовать в качестве публичного, а какие только в качестве частных:
* 10.0.0.45 - частный.
* 134.43.0.2 - публичный.
* 192.168.4.2 - частный.
* ![](./screenshots/img_1.6.png)
* 172.20.250.4 - частный.
* 172.0.2.1 - публичный.
* 192.172.0.1 - публичный.
* ![](./screenshots/img_1.7.png)
* 172.68.0.2 - публичный.
* 172.16.255.255 - частный.
* 10.10.10.10 - частный.
* ![](./screenshots/img_1.8.png)
* 192.169.168.1 - публичный.
* Какие из перечисленных IP адресов шлюза возможны у сети 10.10.0.0/18:
* 10.0.0.1 - невозможен.
* 10.10.0.2 - возможен.
* 10.10.10.10 - возможен.
* 10.10.100.1 - невозможен.
* 10.10.1.255 - возможен.
* ![](./screenshots/img_1.9.png)
## Part 2. Статическая маршрутизация между двумя машинами
* В настройках делаем общую сеть на виртуальных машинах.
* ![](./screenshots/img_2.5.png)
* С помощью команды "ip a" смотрим существующие сетевые интерфейсы.
* На ws1:
* ![](./screenshots/img_2.1.png)
* На ws2:
* ![](./screenshots/img_2.2.png)
* Изменённый файл etc/netplan/00-installer-config.yaml для ws1 и команда "netplan apply" для перезапуска сервиса сети.
* ![](./screenshots/img_2.3.png)
* Изменённый файл etc/netplan/00-installer-config.yaml для ws2 и команда "netplan apply".
* ![](./screenshots/img_2.4.png)
* Добавляем статический маршрут от одной машины до другой на ws1 при помощи команды "ip r add <IP> dev <DevName>" и пингуем соединение.
* ![](./screenshots/img_2.6.png)
* Одновременно добавляем статический маршрут обратно на ws2 и пингуем.
* ![](./screenshots/img_2.7.png)
* Добавляем статический маршрут на ws1 от одной машины до другой с помощью файла etc/netplan/00-installer-config.yaml и пингуем.
* ![](./screenshots/img_2.8.png)
* Аналогично на ws2.
* ![](./screenshots/img_2.9.png)
## Part 3. Утилита iperf3
* 8 Mbps = 1 MB/s.
* 100 MB/s = 100000 Kbps.
* 1 Gbps = 1000 Mbps.
* Для доступа во внешнюю сеть добавляем ещё один адаптер в настройках виртуальной машины.
* ![](./screenshots/img_3.1.png)
* Адаптер внутренней сети остаётся без изменений.
* ![](./screenshots/img_3.2.png)
* Переписываем настройки в файле etc/netplan/00-installer-config.yaml для ws1, возвращая стандартный настройки для внешней сети и прописываем настройки внутренней сети на новый адаптер.
* ![](./screenshots/img_3.3.png)
* Аналогично в файле etc/netplan/00-installer-config.yaml для ws2.
* ![](./screenshots/img_3.4.png)
* Выполняем команду "iperf3 -s -f K" на ws1, тем самым запускаем ожидание запроса от другого компьютера.
* Флаг -f используется, чтобы указать формат (k, m, g для Кбит, Мбит, Гбит или K, M, G для Кбайт, Мбайт, Гбайт) для отчета.
* ![](./screenshots/img_3.5.png)
* На ws2 выполняем "iperf3 -c <IPRemoteComp> -f K" для отправки запроса по IP адрессу и наблюдаем замер скорости.
* ![](./screenshots/img_3.6.png)
## Part 4. Сетевой экран
* Чтобы открыть порт для входящего трафика, используем команду: "iptables -A INPUT -p tcp --dport 80 -j ACCEPT".
* Флаг "-A" означает добавить правило, "-p" указывает на протокол (в данном случае TCP), "--dport" указывает на порт, а "-j" указывает, что делать с пакетами.
* ![](./screenshots/img_4.1.png)
* iptables проверяет первое подходящее правило, а значит второе (противоположное) правило уже выполняться не будет.
* ![](./screenshots/img_4.2.png)
* Таким образом видим, что с ws1 ping проходит.
* ![](./screenshots/img_4.3.png)
* Но с ws2 она не пингуется, хотя через nmap видно состояние "open".
* ![](./screenshots/img_4.4.png)
## Part 5. Статическая маршрутизация сети
* 
* ![](./screenshots/img_.png)
## Part 6. Динамическая настройка IP с помощью DHCP
* 
* ![](./screenshots/img_.png)
## Part 7. NAT
* 
* ![](./screenshots/img_.png)
## Part 8. Допополнительно. Знакомство с SSH Tunnel
* 
* ![](./screenshots/img_.png)